<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>localStorage</title>
</head>
<body>
  <input type="text" placeholder="Add todo" id="input">
  <input type="button" onclick="addTodo()" value="Add Todo"/>
  <input type="button" onclick="clearTodo()" value="Clear Todo"/>
  <ul id="output"></ul>

  <script type="text/javascript">
    const input = document.getElementById('input')
    const output = document.getElementById('output')

    var store = [] // Temporary array

    // Function for add list into DOM
    const addList = function(data){
      var e = document.createElement('li');
      e.innerHTML = data;
      output.appendChild(e)
    }

    // Check if localStorage.data exist
    if (localStorage.data){
      var previousData = JSON.parse(localStorage.data)
      store = previousData // Add previous data to store array
      store.forEach(function(data){
        addList(data);
      })
    }

    // Function for add todo
    const addTodo = function(){
      var newData = store.push(input.value) // push data to store array
      var result = JSON.stringify(store) // stringify store array
      localStorage.data = result // Add list to localStorage
      addList(input.value) // Add list to DOM
    }

    const clearTodo = function(){
      store = [] // Clear the store array
      output.innerHTML = "" // Clear the list DOM
      localStorage.clear() // Clear the localStorage
    }
  </script>
</body>
</html>
